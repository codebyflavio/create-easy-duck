{"version":3,"file":"index.es.js","sources":["../src/index.js"],"sourcesContent":["import { createSelector } from 'reselect'\nimport createSagaMiddleware from 'redux-saga'\nimport { applyMiddleware, createStore, compose } from 'redux'\nimport thunk from 'redux-thunk'\n\nexport const createTypes = type => ({\n  START: `${type}/START`,\n  RESET: `${type}/RESET`,\n  FINISH: `${type}/FINISH`,\n  ERROR: `${type}/ERROR`,\n})\n\nexport const createActionCreators = type => {\n  const { START, RESET, FINISH, ERROR } = createTypes(type)\n\n  return {\n    start: () => ({ type: START }),\n    reset: () => ({ type: RESET }),\n    finish: payload => ({ type: FINISH, payload }),\n    error: error => ({\n      type: ERROR,\n      error: (error && error.message) || 'Something went wrong',\n    }),\n  }\n}\n\nconst INITIAL_STATE = {\n  isLoading: true,\n  error: null,\n  payload: null,\n}\n\nexport const createReducer = (type, initialState = INITIAL_STATE) => (\n  state,\n  action = {},\n) => {\n  const { START, FINISH, ERROR, RESET } = createTypes(type)\n\n  switch (action.type) {\n    case START:\n      return {\n        isLoading: true,\n        error: null,\n        payload: initialState.payload,\n      }\n\n    case FINISH:\n      return {\n        isLoading: false,\n        error: null,\n        payload: action.payload,\n      }\n\n    case ERROR:\n      return {\n        isLoading: false,\n        error: action.error,\n        payload: initialState.payload,\n      }\n\n    case RESET:\n      return initialState\n\n    default:\n      return state || initialState\n  }\n}\n\nexport const createSelectors = (type, selectors) => {\n  const allSelector = createSelector(\n    state => state[type] || state,\n    root => root,\n  )\n  const payloadSelector = createSelector(\n    allSelector,\n    root => root.payload,\n  )\n\n  return {\n    ...selectors,\n    getAll: allSelector,\n    getIsLoading: createSelector(\n      allSelector,\n      root => root.isLoading,\n    ),\n    getPayload: payloadSelector,\n    getPayloadData: createSelector(\n      payloadSelector,\n      payload => (payload && payload.data ? payload.data : null),\n    ),\n    getError: createSelector(\n      allSelector,\n      root => root.error,\n    ),\n  }\n}\n\nexport const createDuck = ({ type, initialState, selectors, ...rest }) => {\n  const action = createActionCreators(type)\n  const reducer = createReducer(type, initialState)\n\n  const duck = {\n    type,\n    action,\n    reducer,\n    selectors: createSelectors(type, selectors),\n  }\n\n  const getAsyncAction = (name, fn) => (props, callback) => async dispatch => {\n    dispatch(duck.action.start())\n\n    return fn(props)\n      .then(payload => {\n        if (callback) return callback(payload)\n        return name === 'get' && dispatch(duck.action.finish(payload))\n      })\n      .catch(error => dispatch(duck.action.error(error)))\n  }\n\n  Object.entries(rest).map(\n    ([name, value]) => (duck.action[name] = getAsyncAction(name, value)),\n  )\n\n  return duck\n}\n\nexport const createEasyStore = ({\n  reducer = state => state,\n  middlewares = [],\n  saga,\n  name,\n}) => {\n  const composeEnhancers =\n    typeof window === 'object' && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n      ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({\n          name,\n          serialize: true,\n        })\n      : compose\n\n  const sagaMiddleware = saga && createSagaMiddleware()\n\n  const allMiddlewares = [thunk, ...middlewares]\n\n  if (sagaMiddleware) allMiddlewares.push(sagaMiddleware)\n\n  const store = createStore(\n    reducer,\n    composeEnhancers(applyMiddleware(...allMiddlewares)),\n  )\n\n  if (sagaMiddleware) sagaMiddleware.run(saga)\n\n  return store\n}\n"],"names":["createTypes","type","START","RESET","FINISH","ERROR","createActionCreators","start","reset","finish","payload","error","message","INITIAL_STATE","isLoading","createReducer","initialState","state","action","createSelectors","selectors","allSelector","createSelector","root","payloadSelector","getAll","getIsLoading","getPayload","getPayloadData","data","getError","createDuck","rest","reducer","duck","getAsyncAction","name","fn","props","callback","dispatch","then","catch","Object","entries","map","value","createEasyStore","middlewares","saga","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","serialize","compose","sagaMiddleware","createSagaMiddleware","allMiddlewares","thunk","push","store","createStore","applyMiddleware","run"],"mappings":"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"}