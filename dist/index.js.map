{"version":3,"file":"index.js","sources":["../node_modules/reselect/es/index.js","../src/index.js"],"sourcesContent":["function defaultEqualityCheck(a, b) {\n  return a === b;\n}\n\nfunction areArgumentsShallowlyEqual(equalityCheck, prev, next) {\n  if (prev === null || next === null || prev.length !== next.length) {\n    return false;\n  }\n\n  // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n  var length = prev.length;\n  for (var i = 0; i < length; i++) {\n    if (!equalityCheck(prev[i], next[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport function defaultMemoize(func) {\n  var equalityCheck = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultEqualityCheck;\n\n  var lastArgs = null;\n  var lastResult = null;\n  // we reference arguments instead of spreading them for performance reasons\n  return function () {\n    if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n      // apply arguments instead of spreading for performance.\n      lastResult = func.apply(null, arguments);\n    }\n\n    lastArgs = arguments;\n    return lastResult;\n  };\n}\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep;\n    }).join(', ');\n    throw new Error('Selector creators expect all input-selectors to be functions, ' + ('instead received the following types: [' + dependencyTypes + ']'));\n  }\n\n  return dependencies;\n}\n\nexport function createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptions = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptions[_key - 1] = arguments[_key];\n  }\n\n  return function () {\n    for (var _len2 = arguments.length, funcs = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var recomputations = 0;\n    var resultFunc = funcs.pop();\n    var dependencies = getDependencies(funcs);\n\n    var memoizedResultFunc = memoize.apply(undefined, [function () {\n      recomputations++;\n      // apply arguments instead of spreading for performance.\n      return resultFunc.apply(null, arguments);\n    }].concat(memoizeOptions));\n\n    // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        params.push(dependencies[i].apply(null, arguments));\n      }\n\n      // apply arguments instead of spreading for performance.\n      return memoizedResultFunc.apply(null, params);\n    });\n\n    selector.resultFunc = resultFunc;\n    selector.dependencies = dependencies;\n    selector.recomputations = function () {\n      return recomputations;\n    };\n    selector.resetRecomputations = function () {\n      return recomputations = 0;\n    };\n    return selector;\n  };\n}\n\nexport var createSelector = createSelectorCreator(defaultMemoize);\n\nexport function createStructuredSelector(selectors) {\n  var selectorCreator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createSelector;\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + ('where each property is a selector, instead received a ' + typeof selectors));\n  }\n  var objectKeys = Object.keys(selectors);\n  return selectorCreator(objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n}","import { createSelector } from 'reselect'\n\nexport const createTypes = type => ({\n  START: `${type}/START`,\n  RESET: `${type}/RESET`,\n  FINISH: `${type}/FINISH`,\n  ERROR: `${type}/ERROR`,\n})\n\nexport const createActionCreators = type => {\n  const { START, RESET, FINISH, ERROR } = createTypes(type)\n\n  return {\n    start: () => ({ type: START }),\n    reset: () => ({ type: RESET }),\n    finish: payload => ({ type: FINISH, payload }),\n    error: error => ({\n      type: ERROR,\n      error: (error && error.message) || 'Something went wrong',\n    }),\n  }\n}\n\nconst INITIAL_STATE = {\n  isLoading: false,\n  error: null,\n  payload: null,\n}\n\nexport const createReducer = (type, initialState = {}) => (\n  state = INITIAL_STATE,\n  action = {},\n) => {\n  const { START, FINISH, ERROR, RESET } = createTypes(type)\n\n  const INITIAL = { ...INITIAL_STATE, ...initialState }\n\n  switch (action.type) {\n    case START:\n      return {\n        isLoading: true,\n        error: null,\n        payload: INITIAL.payload,\n      }\n\n    case FINISH:\n      return {\n        isLoading: false,\n        error: null,\n        payload: action.payload,\n      }\n\n    case ERROR:\n      return {\n        isLoading: false,\n        error: action.error,\n        payload: INITIAL.payload,\n      }\n\n    case RESET:\n    default:\n      return INITIAL\n  }\n}\n\nexport const createSelectors = (type, selectors) => {\n  const allSelector = createSelector(\n    state => state[type] || state,\n    root => root,\n  )\n  const payloadSelector = createSelector(\n    allSelector,\n    root => root.payload,\n  )\n\n  return {\n    ...selectors,\n    getAll: allSelector,\n    getIsLoading: createSelector(\n      allSelector,\n      root => root.isLoading,\n    ),\n    getPayload: payloadSelector,\n    getPayloadData: createSelector(\n      payloadSelector,\n      payload => (payload && payload.data ? payload.data : null),\n    ),\n    getError: createSelector(\n      allSelector,\n      root => root.error,\n    ),\n  }\n}\n\nexport const createDuck = ({ type, initialState, selectors, ...rest }) => {\n  const action = createActionCreators(type)\n  const reducer = createReducer(type, initialState)\n\n  const duck = {\n    type,\n    action,\n    reducer,\n    selectors: createSelectors(type, selectors),\n  }\n\n  const getAsyncAction = (name, fn) => (props, callback) => async dispatch => {\n    dispatch(duck.action.start())\n\n    return fn(props)\n      .then(payload => {\n        if (callback) return callback(payload)\n        return name === 'get' && dispatch(duck.action.finish(payload))\n      })\n      .catch(error => dispatch(duck.action.error(error)))\n  }\n\n  Object.entries(rest).map(\n    ([name, value]) => (duck.action[name] = getAsyncAction(name, value)),\n  )\n\n  return duck\n}\n"],"names":["createTypes","type","START","RESET","FINISH","ERROR","createActionCreators","start","reset","finish","payload","error","message","INITIAL_STATE","isLoading","createReducer","initialState","state","action","INITIAL","createSelectors","selectors","allSelector","createSelector","root","payloadSelector","getAll","getIsLoading","getPayload","getPayloadData","data","getError","createDuck","rest","reducer","duck","getAsyncAction","name","fn","props","callback","dispatch","then","catch","Object","entries","map","value"],"mappings":"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"}